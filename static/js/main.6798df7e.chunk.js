(this["webpackJsonpromi-dashboard"]=this["webpackJsonpromi-dashboard"]||[]).push([[0],{116:function(e,t,n){e.exports=n(146)},139:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);n(117);var a=n(0),r=n.n(a),o=n(19),i=n.n(o),c=n(10),l=n.n(c),s=n(20),u=(n(123),n(24)),d=n(23),f=n(84),m=function(){function e(){Object(u.a)(this,e),this.currentTraj=0}return Object(d.a)(e,[{key:"latestTrajectory",value:function(){var e=Object(s.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("L1"!==t.param.map_name){e.next=4;break}return n=f[this.currentTraj++],this.currentTraj%=f.length,e.abrupt("return",JSON.parse(JSON.stringify(n)));case 4:return e.abrupt("return",{response:"trajectory",values:[],conflicts:[]});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serverTime",value:function(e){throw new Error("Method not implemented.")}}]),e}(),v=n(46),p=n(40),b=n(39),E=n(4),h=n(44),g=n.n(h),O=n(96);function x(){for(var e=[],t=1;t<=20;t++)e.push({name:"Geth".concat(t),model:"TeRmInAtOr",mode:{mode:E.RobotMode.MODE_MOVING},location:{level_name:"L1",x:t,y:-2,yaw:.1*t%2*Math.PI,t:{sec:0,nanosec:0}},battery_percent:100,path:[],task_id:"taskA"});return{name:"SuperFleet",robots:e}}function y(){return{Lift1:{lift_name:"Lift1",available_floors:["L1","L2","L3"],available_modes:new Uint8Array([E.LiftState.MODE_AGV]),current_floor:"L1",current_mode:E.LiftState.MODE_AGV,destination_floor:"L1",door_state:E.LiftState.DOOR_OPEN,lift_time:{sec:0,nanosec:0},motion_state:E.LiftState.MOTION_STOPPED,session_id:""},Lift2:{lift_name:"Lift2",available_floors:["L1","L2","L3","L4"],available_modes:new Uint8Array([E.LiftState.MODE_AGV]),current_floor:"L2",current_mode:E.LiftState.MODE_FIRE,destination_floor:"L4",door_state:E.LiftState.DOOR_CLOSED,lift_time:{sec:0,nanosec:0},motion_state:E.LiftState.MOTION_UP,session_id:""},Lift3:{lift_name:"Lift3",available_floors:["L1","L2","L3","L4"],available_modes:new Uint8Array([E.LiftState.MODE_AGV]),current_floor:"L2",current_mode:E.LiftState.MODE_AGV,destination_floor:"L3",door_state:E.LiftState.DOOR_CLOSED,lift_time:{sec:0,nanosec:0},motion_state:E.LiftState.MOTION_UP,session_id:""}}}var _=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).name="fake",e}return Object(d.a)(n,[{key:"createPublisher",value:function(e,t){return{publish:g.a.log}}},{key:"subscribe",value:function(e,t,n){switch(g.a.log("subscribe:",e),e){case E.doorStates:var a={Door1:{door_name:"coe_door",current_mode:{value:E.DoorMode.MODE_OPEN},door_time:{sec:0,nanosec:0}},Door2:{door_name:"hardware_door",current_mode:{value:E.DoorMode.MODE_CLOSED},door_time:{sec:0,nanosec:0}},Door3:{door_name:"exit_door",current_mode:{value:E.DoorMode.MODE_MOVING},door_time:{sec:0,nanosec:0}}};setInterval((function(){for(var e=0,n=Object.values(a);e<n.length;e++){var r=n[e];t(r)}}),1e3);break;case E.liftStates:var r=y();setInterval((function(){for(var e=0,n=Object.values(r);e<n.length;e++){var a=n[e];t(a)}}),1e3);break;case E.fleetStates:var o=[{name:"Fleet1",robots:[{name:"RobotA",model:"ModelA",mode:{mode:E.RobotMode.MODE_MOVING},location:{level_name:"L1",x:2,y:-5,yaw:0,t:{sec:0,nanosec:0}},battery_percent:100,path:[],task_id:"taskA"},{name:"RobotB",model:"ModelB",mode:{mode:E.RobotMode.MODE_WAITING},location:{level_name:"L1",x:12,y:-10,yaw:0,t:{sec:0,nanosec:0}},battery_percent:100,path:[],task_id:"taskB"}]},{name:"Fleet2",robots:[{name:"RobotC",model:"ModelC",mode:{mode:E.RobotMode.MODE_EMERGENCY},location:{level_name:"L2",x:4,y:-12,yaw:0,t:{sec:0,nanosec:0}},battery_percent:100,path:[],task_id:"taskC"}]},x()];setInterval((function(){var e,n=Object(v.a)(o);try{for(n.s();!(e=n.n()).done;){var a=e.value;t(a)}}catch(r){n.e(r)}finally{n.f()}}),1e3);break;case E.dispenserStates:var i={Dispenser0:{time:{sec:0,nanosec:0},guid:"Dispenser0",mode:0,request_guid_queue:[],seconds_remaining:0},Dispenser1:{time:{sec:0,nanosec:0},guid:"Dispenser1",mode:1,request_guid_queue:["Request0","Request1","Request2","Request3","Request4","Request5","Request6","Request7","Request8","Request9"],seconds_remaining:420},Dispenser2:{time:{sec:0,nanosec:0},guid:"Dispenser2",mode:2,request_guid_queue:[],seconds_remaining:0}};setInterval((function(){for(var e=0,n=Object.values(i);e<n.length;e++){var a=n[e];t(a)}}),1e3)}if(e!==E.liftStates&&"lift_states"===e.topic){var c=y();setInterval((function(){for(var e=0,n=Object.values(c);e<n.length;e++){var a=n[e];t(a)}}),1e3)}return{unsubscribe:function(){}}}},{key:"call",value:function(){var e=Object(s.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("get_building_map"!==t.service){e.next=6;break}return e.t0=E.GetBuildingMap_Response,e.next=4,Object(O.a)();case 4:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 6:throw new Error("not implemented");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createService",value:function(e){throw new Error("not implemented")}},{key:"destroy",value:function(){}}]),n}(E.TransportEvents),k=n(7);function j(e){var t,n=[],a=Object(v.a)(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,o=Object(k.a)(r.x,3),i=o[0],c=o[1],l=o[2],s=Object(k.a)(r.v,3),u=s[0],d=s[1],f=s[2];n.push({pose:{x:i,y:c,theta:l},velocity:{x:u,y:d,theta:f},time:r.t})}}catch(m){a.e(m)}finally{a.f()}return n}var S,w,L={transportFactory:function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new _);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),trajectoryManagerFactory:function(){var e=Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new m);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},C=n(196),D=n(215),M=n(216),N=n(66),R=n(149),I=n(152),F=n(217),P=n(218),T=(n(138),n(15)),A=n(47),B=n.n(A),U=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._dispenserStates={},e}return Object(d.a)(n,[{key:"dispenserStates",value:function(){return Object(T.a)({},this._dispenserStates)}},{key:"startSubscription",value:function(e){var t=this;e.subscribe(E.dispenserStates,(function(e){t._dispenserStates[e.guid]=e,t.emit("updated")}))}}]),n}(B.a),G=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._doorStates={},e}return Object(d.a)(n,[{key:"doorStates",value:function(){return Object(T.a)({},this._doorStates)}},{key:"startSubscription",value:function(e){var t=this;e.subscribe(E.doorStates,(function(e){t._doorStates[e.door_name]=e,t.emit("updated")}))}}]),n}(B.a),q=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._fleets={},e}return Object(d.a)(n,[{key:"fleets",value:function(){return Array.from(Object.values(this._fleets))}},{key:"startSubscription",value:function(e){var t=this;e.subscribe(E.fleetStates,(function(e){t._fleets[e.name]=e,t.emit("updated")}))}}]),n}(B.a),W=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r)))._liftStates={},e}return Object(d.a)(n,[{key:"liftStates",value:function(){return Object(T.a)({},this._liftStates)}},{key:"startSubscription",value:function(e){var t=this;e.subscribe(E.skipValidation(E.liftStates),(function(e){t._liftStates[e.lift_name]=e,t.emit("updated")}))}}]),n}(B.a);function V(){return{trajectoryAnimation:S.Follow,trajectoryAnimationSpeed:w.Normal}}!function(e){e[e.None=0]="None",e[e.Fill=1]="Fill",e[e.Follow=2]="Follow",e[e.Outline=3]="Outline"}(S||(S={})),function(e){e[e.Slow=0]="Slow",e[e.Normal=1]="Normal",e[e.Fast=2]="Fast"}(w||(w={}));var z=r.a.createContext(V()),Y=(n(139),n(21)),H=n(17),K=n(188),J=n(148),Q=n(191),X=n(224),Z=n(192),$=n(194),ee=n(195),te=n(193),ne=r.a.forwardRef((function(e,t){var n=e.dispenserState,a=Object(H.a)(e,["dispenserState"]),o=ae(),i=re();return r.a.createElement(X.a,Object.assign({ref:t},a),r.a.createElement(Z.a,{classes:{content:o.expansionSummaryContent},expandIcon:r.a.createElement(te.a,null)},r.a.createElement(N.a,{variant:"h5"},n.guid),r.a.createElement(N.a,{className:function(){switch(n.mode){case E.DispenserState.IDLE:return"".concat(o.dispenserLabel," ").concat(i.idle);case E.DispenserState.BUSY:return"".concat(o.dispenserLabel," ").concat(i.busy);case E.DispenserState.OFFLINE:return"".concat(o.dispenserLabel," ").concat(i.offline);default:return""}}(),variant:"button"},function(){switch(n.mode){case E.DispenserState.IDLE:return"IDLE";case E.DispenserState.BUSY:return"ONLINE";case E.DispenserState.OFFLINE:return"OFFLINE";default:return"UNKNOWN"}}())),r.a.createElement($.a,{className:o.expansionDetail},r.a.createElement("div",{className:o.expansionDetailLine},r.a.createElement(N.a,{variant:"body1"},"No. Queued Requests:"),r.a.createElement(N.a,{variant:"body1"},String(n.request_guid_queue.length))),r.a.createElement(ee.a,null),r.a.createElement("div",{className:o.expansionDetailLine},r.a.createElement(N.a,{variant:"body1"},"Request Queue ID:"),r.a.createElement(K.a,{className:o.listRoot,dense:!0},n.request_guid_queue.map((function(e){return r.a.createElement(J.a,{key:e},r.a.createElement(Q.a,{primary:e}))})))),r.a.createElement(ee.a,null),r.a.createElement("div",{className:o.expansionDetailLine},r.a.createElement(N.a,{variant:"body1"},"Seconds Remaining:"),r.a.createElement(N.a,{variant:"body1"},String(n.seconds_remaining)))))})),ae=Object(C.a)((function(e){return{expansionSummaryContent:{alignItems:"center",justifyContent:"space-between"},expansionDetail:{flexFlow:"column"},expansionDetailLine:{display:"inline-flex",justifyContent:"space-between",padding:e.spacing(.5)},dispenserLabel:{borderRadius:e.shape.borderRadius,borderStyle:"solid",border:2,padding:5,width:"4rem",textAlign:"center"},listRoot:{position:"relative",overflow:"auto",maxHeight:100}}})),re=Object(C.a)((function(e){var t={borderRadius:e.shape.borderRadius,borderStyle:"solid",border:2,padding:5,width:"4rem",textAlign:"center"};return{idle:Object(T.a)({},t,{borderColor:e.palette.warning.main}),busy:Object(T.a)({},t,{borderColor:e.palette.success.main}),offline:Object(T.a)({},t,{borderColor:e.palette.error.main})}}));function oe(e){var t=e.spotlight,n=r.a.useRef({}),a=r.a.useState({}),o=Object(k.a)(a,2),i=o[0],c=o[1];r.a.useEffect((function(){if(t){var e=n.current[t.value];e&&(c((function(e){return Object(T.a)({},e,Object(Y.a)({},t.value,!0))})),e.scrollIntoView({behavior:"smooth"}))}}),[t]);var l=Object.keys(e.dispenserStates).map((function(t,a){var o=e.dispenserStates[t];return r.a.createElement(ne,{key:o.guid,ref:function(e){return n.current[o.guid]=e},dispenserState:o,expanded:Boolean(i[o.guid]),onChange:function(e,t){return c((function(e){return Object(T.a)({},e,Object(Y.a)({},o.guid,t))}))}})}));return r.a.createElement(r.a.Fragment,null,l)}var ie=n(25),ce=n(197),le=n(150),se=r.a.forwardRef((function(e,t){var n=e.door,a=e.doorState,o=e.enableControls,i=e.onOpenClick,c=e.onCloseClick,l=Object(H.a)(e,["door","doorState","enableControls","onOpenClick","onCloseClick"]),s=ue(),u=Object(ie.a)();return r.a.createElement(X.a,Object.assign({ref:t},l),r.a.createElement(Z.a,{classes:{content:s.expansionSummaryContent},expandIcon:r.a.createElement(te.a,null)},r.a.createElement(N.a,{variant:"h5"},n.name),r.a.createElement(N.a,{className:function(e){if(!e)return"";switch(e.current_mode.value){case E.DoorMode.MODE_OPEN:return"".concat(s.doorLabel," ").concat(s.doorLabelOpen);case E.DoorMode.MODE_CLOSED:return"".concat(s.doorLabel," ").concat(s.doorLabelClosed);case E.DoorMode.MODE_MOVING:return"".concat(s.doorLabel," ").concat(s.doorLabelMoving);default:return""}}(a),variant:"button"},function(e){if(!e)return"UNKNOWN";switch(e.current_mode.value){case E.DoorMode.MODE_OPEN:return"OPEN";case E.DoorMode.MODE_CLOSED:return"CLOSED";case E.DoorMode.MODE_MOVING:return"MOVING";default:return"UNKNOWN"}}(a))),r.a.createElement($.a,{className:s.expansionDetail},r.a.createElement("div",{className:s.expansionDetailLine},r.a.createElement(N.a,{variant:"body1"},"Type:"),r.a.createElement(N.a,{variant:"body1"},function(e){switch(e){case E.Door.DOOR_TYPE_DOUBLE_SLIDING:return"Double Sliding";case E.Door.DOOR_TYPE_DOUBLE_SWING:return"Double Swing";case E.Door.DOOR_TYPE_DOUBLE_TELESCOPE:return"Double Telescope";case E.Door.DOOR_TYPE_SINGLE_SLIDING:return"Sliding";case E.Door.DOOR_TYPE_SINGLE_TELESCOPE:return"Telescope";default:return"Unknown (".concat(e,")")}}(n.door_type))),r.a.createElement(ee.a,null),r.a.createElement("div",{className:s.expansionDetailLine},r.a.createElement(N.a,{variant:"body1"},"Motion Direction:"),r.a.createElement(N.a,{variant:"body1"},function(e){switch(e){case 1:return"Clockwise";case-1:return"Anti-Clockwise";default:return"Unknown (".concat(e,")")}}(n.motion_direction))),r.a.createElement(ee.a,null),r.a.createElement("div",{className:s.expansionDetailLine},r.a.createElement(N.a,{variant:"body1"},"Motion Range:"),r.a.createElement(N.a,{variant:"body1"},n.motion_range)),r.a.createElement(ee.a,null),r.a.createElement("div",{className:s.expansionDetailLine},r.a.createElement(N.a,{variant:"body1"},"Location:"),r.a.createElement(N.a,{variant:"body1"},"(",n.v1_x.toFixed(3),", ",n.v1_y.toFixed(3),")")),r.a.createElement(ce.a,{style:{marginTop:u.spacing(1)},fullWidth:!0,disabled:!o},r.a.createElement(le.a,{onClick:function(){return c&&c(n)}},"Close"),r.a.createElement(le.a,{onClick:function(){return i&&i(n)}},"Open"))))})),ue=Object(C.a)((function(e){return{expansionSummaryContent:{alignItems:"center",justifyContent:"space-between"},expansionDetail:{flexFlow:"column"},expansionDetailLine:{display:"inline-flex",justifyContent:"space-between",padding:e.spacing(.5)},doorLabel:{borderRadius:e.shape.borderRadius,borderStyle:"solid",border:2,padding:5,width:"4rem",textAlign:"center"},doorLabelOpen:{borderColor:e.palette.success.main},doorLabelClosed:{borderColor:e.palette.error.main},doorLabelMoving:{borderColor:e.palette.warning.main}}}));function de(e){var t=e.transport,n=e.spotlight,a=e.onDoorClick,o=r.a.useRef({}),i=r.a.useState({}),c=Object(k.a)(i,2),l=c[0],s=c[1],u=r.a.useMemo((function(){return t?t.createPublisher(E.doorRequests):null}),[t]);function d(e,n){null===u||void 0===u||u.publish({door_name:e.name,requested_mode:{value:n},requester_id:t.name,request_time:E.toRosTime(new Date)})}r.a.useEffect((function(){if(n){var e=o.current[n.value];e&&(s((function(e){return Object(T.a)({},e,Object(Y.a)({},n.value,!0))})),e.scrollIntoView({behavior:"smooth"}))}}),[n]);var f=e.doors.map((function(n){var i=e.doorStates[n.name];return r.a.createElement(se,{key:n.name,ref:function(e){return o.current[n.name]=e},door:n,doorState:i,enableControls:Boolean(t),onOpenClick:function(){return d(n,E.DoorMode.MODE_OPEN)},onCloseClick:function(){return d(n,E.DoorMode.MODE_CLOSED)},onClick:function(){return a&&a(n)},expanded:Boolean(l[n.name]),onChange:function(e,t){return s((function(e){return Object(T.a)({},e,Object(Y.a)({},n.name,t))}))}})}));return r.a.createElement(r.a.Fragment,null,f)}var fe=n(226),me=n(199),ve=n(3),pe=Object(C.a)((function(e){return{disabled:{color:e.palette.action.disabled}}}));function be(e){var t,n=e.className,a=e.disabled,o=Object(H.a)(e,["className","disabled"]),i=pe();return r.a.createElement(N.a,Object.assign({className:Object(ve.a)((t={},Object(Y.a)(t,i.disabled,a),Object(Y.a)(t,"className",n),t))},o),e.children)}var Ee=r.a.forwardRef((function(e,t){var n=e.lift,a=e.liftState,o=e.enableRequest,i=e.onRequest,c=Object(H.a)(e,["lift","liftState","enableRequest","onRequest"]),l=Object(ie.a)(),s=he(),u=r.a.useState(null),d=Object(k.a)(u,2),f=d[0],m=d[1];function v(e){var t=e.map((function(e){return r.a.createElement(J.a,{key:e,dense:!0,className:s.noPadding},r.a.createElement(N.a,{variant:"body1"},e))}));return r.a.createElement(K.a,null,t)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,Object.assign({ref:t},c),r.a.createElement(Z.a,{classes:{content:s.expansionSummaryContent},expandIcon:r.a.createElement(te.a,null)},r.a.createElement(N.a,{variant:"h5"},n.name),r.a.createElement(N.a,{className:function(e){if(!e)return s.liftFloorLabelUnknown;switch(e.motion_state){case E.LiftState.MOTION_UP:case E.LiftState.MOTION_DOWN:return s.liftFloorLabelMoving;default:return s.liftFloorLabelStopped}}(a),variant:"button"},a?a.current_floor:"Unknown")),r.a.createElement($.a,{className:s.expansionDetail},r.a.createElement("div",{className:s.expansionDetailLine},r.a.createElement(N.a,{variant:"body1"},"Location:"),r.a.createElement(N.a,{variant:"body1"},"(".concat(n.ref_x.toFixed(3),", ").concat(n.ref_y.toFixed(3),")"))),r.a.createElement("div",{className:s.expansionDetailLine},r.a.createElement(N.a,{variant:"body1"},"Destination Floor:"),r.a.createElement(be,{disabled:!a,variant:"body1"},a?a.destination_floor:"Unknown")),r.a.createElement(ee.a,null),r.a.createElement("div",{className:s.expansionDetailLine},r.a.createElement(N.a,{variant:"body1"},"Available Floors:"),function(e){return e?v(e.available_floors):r.a.createElement(be,{disabled:!e,variant:"body1"},"Unknown")}(a)),r.a.createElement(ee.a,null),r.a.createElement("div",{className:s.expansionDetailLine},r.a.createElement(N.a,{variant:"body1"},"Current Mode:"),r.a.createElement(be,{disabled:!a,variant:"body1"},a?ge(a.current_mode):"Unknown")),r.a.createElement(ee.a,null),r.a.createElement("div",{className:s.expansionDetailLine},r.a.createElement(N.a,{variant:"body1"},"Available Modes:"),function(e){return e?v(Array.from(e.available_modes.values()).map(ge)):r.a.createElement(be,{disabled:!e,variant:"body1"},"Unknown")}(a)),r.a.createElement(ee.a,null),r.a.createElement("div",{className:s.expansionDetailLine},r.a.createElement(N.a,{variant:"body1"},"Door State:"),r.a.createElement(be,{disabled:!a,variant:"body1"},a?function(e){switch(e){case E.LiftState.DOOR_OPEN:return"Open";case E.LiftState.DOOR_CLOSED:return"Closed";case E.LiftState.DOOR_MOVING:return"Moving";default:return"Unknown (".concat(e,")")}}(a.door_state):"Unknown")),r.a.createElement(ee.a,null),r.a.createElement("div",{className:s.expansionDetailLine},r.a.createElement(N.a,{variant:"body1"},"Motion State:"),r.a.createElement(be,{disabled:!a,variant:"body1"},a?function(e){switch(e){case E.LiftState.MOTION_DOWN:return"Down";case E.LiftState.MOTION_STOPPED:return"Stopped";case E.LiftState.MOTION_UP:return"Up";default:return"Unknown (".concat(e,")")}}(a.motion_state):"Unknown")),r.a.createElement(le.a,{variant:"outlined",style:{marginTop:l.spacing(1)},onClick:function(e){return function(e,t){m({lift:t,anchor:{top:e.clientY,left:e.clientX}})}(e,n)},disabled:!o,fullWidth:!0},"Request"))),f&&r.a.createElement(fe.a,{anchorReference:"anchorPosition",anchorPosition:null===f||void 0===f?void 0:f.anchor,open:Boolean(f),onClose:function(){return m(null)}},f&&n.levels.map((function(e){return r.a.createElement(me.a,{key:e,onClick:function(){i&&i(n,e),m(null)}},e)}))))})),he=Object(C.a)((function(e){var t={borderRadius:e.shape.borderRadius,borderStyle:"solid",border:2,padding:5,width:"4rem",textAlign:"center"};return{expansionSummaryContent:{alignItems:"center",justifyContent:"space-between"},expansionDetail:{flexFlow:"column"},expansionDetailLine:{display:"inline-flex",justifyContent:"space-between",padding:e.spacing(.5)},noPadding:{padding:0},liftFloorLabelStopped:Object(T.a)({},t,{borderColor:e.palette.info.main}),liftFloorLabelMoving:Object(T.a)({},t,{borderColor:e.palette.warning.main}),liftFloorLabelUnknown:Object(T.a)({},t,{borderStyle:"none"})}}));function ge(e){switch(e){case E.LiftState.MODE_AGV:return"AGV";case E.LiftState.MODE_EMERGENCY:return"Emergency";case E.LiftState.MODE_FIRE:return"Fire";case E.LiftState.MODE_HUMAN:return"Human";default:return"Unknown (".concat(e,")")}}function Oe(e){var t=e.transport,n=e.spotlight,a=e.onLiftRequest,o=e.onLiftClick,i=r.a.useMemo((function(){return t?t.createPublisher(E.liftRequests):null}),[t]),c=r.a.useRef({}),l=r.a.useState({}),s=Object(k.a)(l,2),u=s[0],d=s[1];function f(e,n){null===i||void 0===i||i.publish({lift_name:e.name,door_state:E.LiftRequest.DOOR_OPEN,request_type:E.LiftRequest.REQUEST_AGV_MODE,request_time:E.toRosTime(new Date),destination_floor:n,session_id:t.name}),a&&a(e,n)}return r.a.useEffect((function(){if(n){var e=c.current[n.value];e&&(d((function(e){return Object(T.a)({},e,Object(Y.a)({},n.value,!0))})),e.scrollIntoView({behavior:"smooth"}))}}),[n]),r.a.createElement(r.a.Fragment,null,e.lifts.map((function(n){var a=e.liftStates[n.name];return r.a.createElement(Ee,{key:n.name,lift:n,ref:function(e){return c.current[n.name]=e},liftState:a,enableRequest:Boolean(t),onRequest:f,onClick:function(){return o&&o(n)},expanded:Boolean(u[n.name]),onChange:function(e,t){return d((function(e){return Object(T.a)({},e,Object(Y.a)({},n.name,t))}))}})})))}var xe=n(151),ye=n(200),_e=n(201),ke=n(202),je=Object(C.a)((function(e){return{root:{display:"flex",flexFlow:"column",justifyContent:"center",alignItems:"center",zIndex:e.zIndex.drawer+1},caption:{marginTop:e.spacing(4)}}}));function Se(e){var t=Object(ie.a)(),n=je();return r.a.createElement(xe.a,{className:n.root,open:!0},(void 0===e.variant||"loading"===e.variant)&&r.a.createElement(ye.a,{size:"8rem"}),"success"===e.variant&&r.a.createElement(_e.a,{htmlColor:t.palette.success.main,style:{fontSize:"8rem"}}),"error"===e.variant&&r.a.createElement(ke.a,{color:"error",style:{fontSize:"8rem"}}),r.a.createElement(N.a,{className:n.caption,variant:"button",style:{color:t.palette.getContrastText("#000000")}},e.caption))}function we(e){return r.a.createElement(K.a,null,r.a.createElement(J.a,{button:!0,onClick:e.onDoorsClick},r.a.createElement(N.a,{variant:"h5"},"Doors")),r.a.createElement(ee.a,null),r.a.createElement(J.a,{button:!0,onClick:e.onLiftsClick},r.a.createElement(N.a,{variant:"h5"},"Lifts")),r.a.createElement(ee.a,null),r.a.createElement(J.a,{button:!0,onClick:e.onRobotsClick},r.a.createElement(N.a,{variant:"h5"},"Robots")),r.a.createElement(ee.a,null),r.a.createElement(J.a,{button:!0,onClick:e.onPlacesClick},r.a.createElement(N.a,{variant:"h5"},"Places")),r.a.createElement(ee.a,null),r.a.createElement(J.a,{button:!0,onClick:e.onDispensersClick},r.a.createElement(N.a,{variant:"h5"},"Dispensers")))}var Le=n(153),Ce=n(203),De=n(204),Me=Object(C.a)((function(){return{container:{display:"flex",flexFlow:"column"},viewContainer:{height:"100%",overflowX:"hidden",position:"relative"},viewContainer2:{width:"100%",height:"100%",position:"absolute"}}})),Ne=r.a.forwardRef((function(e,t){var n,a,o,i,c=e.view,l=(e.classes,e.onBack,e.onClose,e.children,Object(H.a)(e,["view","classes","onBack","onClose","children"])),s=Me(),u="".concat(l.className||""," ").concat(s.container," ").concat(e.className);return r.a.createElement("div",Object.assign({},l,{ref:t,className:u}),r.a.createElement(ce.a,{className:null===(n=e.classes)||void 0===n?void 0:n.navigation,variant:"text",fullWidth:!0},r.a.createElement(le.a,{className:null===(a=e.classes)||void 0===a?void 0:a.backButton,size:"large",onClick:function(){e.onBack&&e.onBack(e.view)}},r.a.createElement(Ce.a,null)),r.a.createElement(le.a,{className:null===(o=e.classes)||void 0===o?void 0:o.closeButton,size:"large",onClick:function(){e.onClose&&e.onClose()}},r.a.createElement(De.a,null))),r.a.createElement("div",{className:s.viewContainer},null===(i=e.children)||void 0===i?void 0:i.map((function(e){return r.a.createElement(Le.a,{key:e.props.id,direction:"left",in:e.props.id===c,mountOnEnter:!0,unmountOnExit:!0,appear:!1},r.a.createElement("div",{className:s.viewContainer2},e))}))))}));function Re(e){return r.a.createElement(r.a.Fragment,null,e.children)}var Ie=Object(C.a)((function(e){return{summary:{marginTop:0,marginBottom:0},details:{flexFlow:"column"},detailLine:{width:"100%",display:"inline-flex",justifyContent:"space-between",padding:e.spacing(.5)}}})),Fe=r.a.forwardRef((function(e,t){var n=e.place,a=e.level,o=Object(H.a)(e,["place","level"]),i=Ie();return r.a.createElement(X.a,Object.assign({ref:t},o),r.a.createElement(Z.a,{expandIcon:r.a.createElement(te.a,null)},r.a.createElement(Q.a,{className:i.summary,primary:n.name,primaryTypographyProps:{variant:"h5"},secondary:a.name})),r.a.createElement($.a,{className:i.details},r.a.createElement("div",{className:i.detailLine},r.a.createElement(N.a,null,"Location:"),r.a.createElement(N.a,null,"".concat(a.name," (").concat(n.x.toFixed(3),", ").concat(n.y.toFixed(3),", ").concat(n.yaw.toFixed(3),")"))),r.a.createElement(ee.a,null),r.a.createElement("div",{className:i.detailLine},r.a.createElement(N.a,null,"Position Tolerance:"),r.a.createElement(N.a,null,n.position_tolerance.toFixed(3))),r.a.createElement(ee.a,null),r.a.createElement("div",{className:i.detailLine},r.a.createElement(N.a,null,"Yaw Tolerance:"),r.a.createElement(N.a,null,n.yaw_tolerance.toFixed(3)))))}));function Pe(e){var t=e.buildingMap,n=e.spotlight,a=e.onPlaceClick,o=r.a.useRef({}),i=r.a.useState({}),c=Object(k.a)(i,2),l=c[0],s=c[1];return r.a.useEffect((function(){if(n){var e=o.current[n.value];e&&(s((function(e){return Object(T.a)({},e,Object(Y.a)({},n.value,!0))})),e.scrollIntoView({behavior:"smooth"}))}}),[n]),r.a.createElement(r.a.Fragment,null,t.levels.flatMap((function(e){return e.places.map((function(t){return r.a.createElement(Fe,{key:t.name,ref:function(e){return o.current[t.name]=e},place:t,level:e,onClick:function(){return a&&a(t)},expanded:Boolean(l[t.name]),onChange:function(e,n){return s((function(e){return Object(T.a)({},e,Object(Y.a)({},t.name,n))}))}})}))})))}var Te=n(225),Ae=n(5),Be=n(221),Ue=n(227),Ge=n(205),qe=n(220),We=Object(Ae.a)({root:{borderBottom:"1px solid #e8e8e8"},indicator:{backgroundColor:"#1890ff"}})(Be.a),Ve=Object(Ae.a)((function(e){return Object(Ue.a)({root:{textTransform:"none",minWidth:72,fontWeight:e.typography.fontWeightRegular,marginRight:e.spacing(4),fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:hover":{color:"#40a9ff",opacity:1},"&$selected":{color:"#1890ff",fontWeight:e.typography.fontWeightMedium},"&:focus":{color:"#40a9ff"}},selected:{}})}))((function(e){return r.a.createElement(Ge.a,Object.assign({disableRipple:!0},e))}));function ze(e){var t=e.children,n=e.value,a=e.index,o=Object(H.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:n!==a,id:"scrollable-prevent-tabpanel-".concat(a),"aria-labelledby":"scrollable-prevent-tab-".concat(a)},o),n===a&&r.a.createElement(qe.a,{p:1},t))}var Ye=function(e){var t=e.robot,n=He();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:n.expansionDetailLine},r.a.createElement(N.a,{variant:"subtitle2"},"Model:"),r.a.createElement(N.a,{variant:"body1"},t.model)),r.a.createElement(ee.a,null),r.a.createElement("div",{className:n.expansionDetailLine},r.a.createElement(N.a,{variant:"subtitle2"},"Level:"),r.a.createElement(N.a,{variant:"body1"},t.location.level_name)),r.a.createElement(ee.a,null),r.a.createElement("div",{className:n.expansionDetailLine},r.a.createElement(N.a,{variant:"subtitle2"},"Position:"),r.a.createElement(N.a,{variant:"body1"},"(".concat(t.location.x.toFixed(3),", ").concat(t.location.y.toFixed(3),")"))),r.a.createElement(ee.a,null),r.a.createElement("div",{className:n.expansionDetailLine},r.a.createElement(N.a,{variant:"subtitle2"},"Yaw:"),r.a.createElement(N.a,{variant:"body1"},t.location.yaw.toFixed(3))),r.a.createElement(ee.a,null),r.a.createElement("div",{className:n.expansionDetailLine},r.a.createElement(N.a,{variant:"subtitle2"},"Task Id:"),r.a.createElement(N.a,{variant:"body1",noWrap:!0},t.task_id)),r.a.createElement(ee.a,null),r.a.createElement("div",{className:n.expansionDetailLine},r.a.createElement(N.a,{variant:"subtitle2"},"Battery:"),r.a.createElement(N.a,{variant:"body1"},t.battery_percent)))},He=Object(C.a)((function(e){return{expansionDetailLine:{display:"flex",justifyContent:"space-between",padding:e.spacing(.5)}}})),Ke=n(219),Je=n(222),Qe=n(85),Xe=n.n(Qe),Ze=function(e){var t=e.requestLoop,n=e.fleetName,o=e.listOfPlaces,i=$e(),c=Object(a.useState)(0),l=Object(k.a)(c,2),s=l[0],u=l[1],d=Object(a.useState)(o.length>=2?o[0]:""),f=Object(k.a)(d,2),m=f[0],v=f[1],p=Object(a.useState)(o.length>=2?o[1]:""),b=Object(k.a)(p,2),E=b[0],h=b[1],g=Object(a.useState)(""),O=Object(k.a)(g,2),x=O[0],y=O[1],_=Object(a.useState)(""),j=Object(k.a)(_,2),S=j[0],w=j[1],L=Object(a.useState)(""),C=Object(k.a)(L,2),D=C[0],M=C[1],N=function(){y(""),w(""),M("")},R=function(){var e=!0;return N(),(0===s||s<0)&&(y("Loops can only be > 0"),e=!1),m===E&&(w("Start Location cannot be equal to finish Location"),M("Start Location cannot be equal to finish Location"),e=!1),m||(w("Location cannot be empty"),e=!1),E||(M("Location cannot be empty"),e=!1),e};return r.a.createElement("form",{className:i.form,onSubmit:function(e){var a;e.preventDefault(),R()&&(t(n,s,m,E),a="Success",Xe.a.fire({title:"Done!",text:a?"".concat(a):"Successful Operation",icon:"success",timer:2e3}),u(0),v(o.length>=2?o[0]:""),h(o.length>=2?o[1]:""),N())}},r.a.createElement("div",{className:i.divForm},r.a.createElement(Ke.a,{name:"numLoops",onChange:function(e){u(e.target.value?parseInt(e.target.value):0)},placeholder:"Number of loops",type:"number",value:s||"",className:i.input,label:"Number of loops",variant:"outlined",error:!!x}),x&&r.a.createElement("p",{id:"numLoopsError",className:i.error},x)),r.a.createElement("div",{className:i.divForm},r.a.createElement(Je.a,{getOptionLabel:function(e){return e},onChange:function(e,t){return v(t||"")},options:o,renderInput:function(e){return r.a.createElement(Ke.a,Object.assign({},e,{label:"Pick Start Location",variant:"outlined"}))},value:m||null}),S&&r.a.createElement("p",{id:"startLocationError",className:i.error},S)),r.a.createElement("div",{className:i.divForm},r.a.createElement(Je.a,{getOptionLabel:function(e){return e},onChange:function(e,t){return h(t||"")},options:o,renderInput:function(e){return r.a.createElement(Ke.a,Object.assign({},e,{label:"Pick Finish Location",variant:"outlined"}))},value:E||null}),D&&r.a.createElement("p",{id:"finishLocationError",className:i.error},D)),r.a.createElement("div",{className:i.buttonContainer},r.a.createElement(le.a,{variant:"contained",color:"primary",type:"submit",className:i.button},"Request")))},$e=Object(C.a)((function(e){return{form:{padding:"0.5rem",display:"flex",flexDirection:"column"},divForm:{padding:"0.5rem",width:"100%"},error:{color:e.palette.error.main},input:{width:"100%"},button:{width:"100%"},buttonContainer:{paddingTop:"0.5rem",paddingLeft:"0.5rem",width:"100%"}}}));var et=r.a.forwardRef((function(e,t){var n=e.robot,a=(e.onRobotClick,e.requestLoop),o=e.fleetName,i=Object(H.a)(e,["robot","onRobotClick","requestLoop","fleetName"]),c=r.a.useState(0),l=Object(k.a)(c,2),s=l[0],u=l[1],d=tt(),f={magni:["supplies","magni2_charger","coe","magni1_charger","hardware_2","cubicle_2","pantry","station_1","lounge","cubicle_1","hardware_1","station_2"],SuperFleet:["supplies","magni2_charger","coe","magni1_charger","hardware_2","cubicle_2","pantry","station_1","lounge","cubicle_1","hardware_1","station_2"]}[o];return r.a.createElement(X.a,Object.assign({ref:t},i),r.a.createElement(Z.a,{classes:{content:d.expansionSummaryContent},expandIcon:r.a.createElement(te.a,null)},r.a.createElement(N.a,{variant:"h5"},n.name),r.a.createElement(N.a,{className:d.robotStatusLabel,variant:"button"},function(e){switch(e.mode){case E.RobotMode.MODE_CHARGING:return"Charging";case E.RobotMode.MODE_DOCKING:return"Docking";case E.RobotMode.MODE_EMERGENCY:return"Emergency";case E.RobotMode.MODE_GOING_HOME:return"Going Home";case E.RobotMode.MODE_IDLE:return"Idle";case E.RobotMode.MODE_MOVING:return"Moving";case E.RobotMode.MODE_PAUSED:return"Paused";case E.RobotMode.MODE_WAITING:return"Waiting";default:return"Unknown (".concat(e.mode,")")}}(n.mode))),r.a.createElement($.a,{className:d.expansionDetail},r.a.createElement(We,{value:s,onChange:function(e,t){u(t)},"aria-label":"ant example"},r.a.createElement(Ve,{label:"Info"}),r.a.createElement(Ve,{label:"Loop"}),r.a.createElement(Ve,{label:"Delivery"})),r.a.createElement(ze,{value:s,index:0},r.a.createElement(Ye,{robot:n})),r.a.createElement(ze,{value:s,index:1},!!f&&r.a.createElement(Ze,{requestLoop:a,fleetName:o,listOfPlaces:f}))))})),tt=Object(C.a)((function(e){return{expansionSummaryContent:{alignItems:"center",justifyContent:"space-between"},expansionDetail:{flexFlow:"column",padding:"0",overflowX:"auto"},expansionDetailLine:{display:"inline-flex",justifyContent:"space-between",padding:e.spacing(.5)},robotStatusLabel:{borderRadius:e.shape.borderRadius,borderStyle:"solid",borderColor:e.palette.info.main,border:2,padding:5,minWidth:"4rem",textAlign:"center"}}}));function nt(e){var t=e.fleets,n=e.spotlight,a=e.onRobotClick,o=e.transport,i=r.a.useRef({}),c=r.a.useState({}),l=Object(k.a)(c,2),s=l[0],u=l[1],d=r.a.useMemo((function(){return o?o.createPublisher(E.loopRequests):null}),[o]),f=function(e,t,n,a){!function(e,t,n,a,r){null===e||void 0===e||e.publish({finish_name:r,num_loops:n,robot_type:t,start_name:a,task_id:Object(Te.a)()})}(d,e,t,n,a)};return r.a.useEffect((function(){if(n){var e=i.current[n.value];e&&(u((function(e){return Object(T.a)({},e,Object(Y.a)({},n.value,!0))})),e.scrollIntoView({behavior:"smooth"}))}}),[n]),r.a.createElement(r.a.Fragment,null,t.flatMap((function(e){return e.robots.map((function(t){return r.a.createElement(et,{key:t.name,ref:function(e){return i.current[t.name]=e},requestLoop:f,fleetName:e.name,robot:t,onClick:function(){return a&&a(t)},expanded:Boolean(s[t.name]),onChange:function(e,n){return u((function(e){return Object(T.a)({},e,Object(Y.a)({},t.name,n))}))},TransitionProps:{unmountOnExit:!0}})}))})))}var at=n(13),rt=n(209),ot=n(210),it=n(211),ct=n(228),lt=n(212);function st(e){var t=new Blob([e]);return URL.createObjectURL(t)}function ut(e){return dt.apply(this,arguments)}function dt(){return(dt=Object(s.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new TextEncoder,a=n.encode(t),e.abrupt("return",crypto.subtle.digest("SHA-256",a));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ft=function(){function e(){Object(u.a)(this,e),this._robotColorCache={}}return Object(d.a)(e,[{key:"robotColor",value:function(){var e=Object(s.a)(l.a.mark((function e(t,n){var a,r,o,i,c,s,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this._robotKey(t,n),r=this._robotColorCache[a]){e.next=19;break}return e.t0=Uint16Array,e.next=6,ut(n);case 6:return e.t1=e.sent,o=new e.t0(e.t1),i=o[0]%360,e.t2=Uint16Array,e.next=12,ut(t);case 12:e.t3=e.sent,c=new e.t2(e.t3),s=c[0]%2500,u=50+s%50,d=25+s/50,r="hsl(".concat(i,", ").concat(u,"%, ").concat(d,"%)"),this._robotColorCache[a]=r;case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"robotColorFromCache",value:function(e,t){var n=this._robotColorCache[this._robotKey(e,t)];return n||null}},{key:"_robotKey",value:function(e,t){return"".concat(e,"__").concat(t)}}]),e}();function mt(e){var t=e instanceof at.LatLngBounds?e:new at.LatLngBounds(e),n=t.getEast()-t.getWest(),a=t.getNorth()-t.getSouth();return"0 0 ".concat(n," ").concat(a)}var vt=r.a.forwardRef((function(e,t){var n=e.place,a=e.size,o=e.onClick,i=pt(),c=Object(ie.a)();return r.a.createElement("g",{ref:t,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return o&&o(e,n)}))},r.a.createElement("rect",{className:i.placeMarker,x:n.x-.5*a,y:-n.y-.5*a,width:a,height:a,fill:c.palette.primary.main,opacity:.95}))})),pt=Object(C.a)((function(){return{placeMarker:{cursor:"pointer",pointerEvents:"auto"}}})),bt=n(208).a;function Et(e){var t=e.places,n=e.onPlaceClick,a=Object(H.a)(e,["places","onPlaceClick"]),o=mt(e.bounds);return r.a.createElement(bt,a,r.a.createElement("svg",{viewBox:o},t.map((function(e){return r.a.createElement(vt,{key:e.name,place:e,size:1,onClick:function(e,t){return n&&n(t)}})}))))}function ht(e){var t=e.initialPose,n=e.finalPose,a=e.initialVelocity,r=e.finalVelocity,o=e.initialTime,i=e.finalTime-o,c=a/i,l=r/i;return{a:l+c-2*n+2*t,b:-l-2*c+3*n-3*t,c:c,d:t}}function gt(e,t,n){return{initialPose:e.pose[n],finalPose:t.pose[n],initialVelocity:e.velocity[n],finalVelocity:t.velocity[n],initialTime:e.time,finalTime:t.time}}function Ot(e){for(var t=[],n=0;n<e.length-1;++n){var a=e[n],r=e[n+1],o={x:ht(gt(a,r,"x")),y:ht(gt(a,r,"y")),theta:ht(gt(a,r,"theta")),initialTime:a.time,finalTime:r.time};t.push(o)}return t}function xt(e){var t=e.a,n=e.b,a=e.c,r=e.d,o=(a+3*r)/3,i=(n-3*r+6*o)/3;return[r,o,i,t+r-3*o+3*i]}function yt(e){var t=xt(e.x),n=xt(e.y);return t.map((function(e,t){return[e,n[t]]}))}var _t=r.a.forwardRef((function(e,t){var n=e.trajectory,a=e.conflicts,o=e.footprint,i=Object(H.a)(e,["trajectory","conflicts","footprint"]),c=Object(ie.a)(),l=r.a.useMemo((function(){var e=Ot(j(n.segments)).map(yt),t="M ".concat(e[0][0][0]," ").concat(-e[0][0][1]," C ");return e.map((function(e){return t+="".concat(e[1][0]," ").concat(-e[1][1]," ")+"".concat(e[2][0]," ").concat(-e[2][1]," ")+"".concat(e[3][0]," ").concat(-e[3][1]," ")})),t}),[n]),s=r.a.useMemo((function(){return a.includes(n.id)?c.palette.error.main:c.palette.success.main}),[n,a,c]);return r.a.createElement("path",Object.assign({ref:t,d:l,stroke:s,opacity:.8,strokeWidth:.8*o,strokeLinecap:"round",fill:"none",pathLength:1,strokeDasharray:2,strokeDashoffset:0},i))}));function kt(e){var t=e.trajs,n=e.conflicts,a=(e.colorManager,Object(H.a)(e,["trajs","conflicts","colorManager"])),o=r.a.useContext(jt),i=e.bounds instanceof at.LatLngBounds?e.bounds:new at.LatLngBounds(e.bounds),c=i.getEast()-i.getWest(),l=i.getNorth()-i.getSouth(),s="0 0 ".concat(c," ").concat(l);return r.a.createElement(bt,a,r.a.createElement("svg",{viewBox:s},t.map((function(e){return r.a.createElement(o.Component,{key:e.id,trajectory:e,footprint:.5,conflicts:n})}))))}var jt=r.a.createContext({Component:_t}),St=Object(C.a)((function(){return{robotMarker:{cursor:"pointer",pointerEvents:"auto"},robotText:{dominantBaseline:"central",textAnchor:"middle",fontSize:"0.18px",fontWeight:"bold",fill:"white"}}})),wt=r.a.forwardRef((function(e,t){var n=St(),a=e.robot,o=e.footprint,i=e.colorManager,c=e.onClick,u=r.a.useState((function(){return i.robotColorFromCache(a.name,a.model)})),d=Object(k.a)(u,2),f=d[0],m=d[1],v=r.a.useMemo((function(){return[a.location.x+Math.cos(a.location.yaw)*o,a.location.y+Math.sin(a.location.yaw)*o]}),[a,o]);return r.a.useLayoutEffect((function(){f||Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=m,e.next=3,i.robotColor(a.name,a.model);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[a,f,i]),r.a.createElement("g",{ref:t,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return c&&c(e,a)}))},f&&r.a.createElement(r.a.Fragment,null,r.a.createElement("filter",{id:"".concat(a.name,"-shadow"),x:"-20%",y:"-20%",width:"140%",height:"140%"},r.a.createElement("feDropShadow",{dx:"0",dy:"0",stdDeviation:.15*o,floodColor:"black"})),r.a.createElement("circle",{className:n.robotMarker,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return c&&c(e,a)})),cx:a.location.x,cy:-a.location.y,r:o,fill:f,filter:"url(#".concat(a.name,"-shadow)")}),r.a.createElement("line",{x1:a.location.x,y1:-a.location.y,x2:v[0],y2:-v[1],stroke:"black",strokeWidth:"0.05"}),r.a.createElement("text",{id:"robotName",className:n.robotText,x:a.location.x,y:-a.location.y},a.name.substring(0,8))))}));function Lt(e){var t=e.robots,n=e.colorManager,a=e.onRobotClick,o=Object(H.a)(e,["robots","colorManager","onRobotClick"]),i=e.bounds instanceof at.LatLngBounds?e.bounds:new at.LatLngBounds(e.bounds),c=i.getEast()-i.getWest(),l=i.getNorth()-i.getSouth(),s="0 0 ".concat(c," ").concat(l);return r.a.createElement(bt,o,r.a.createElement("svg",{viewBox:s},t.map((function(e){return r.a.createElement(wt,{key:e.name,robot:e,footprint:.5,colorManager:n,onClick:function(e,t){return a&&a(t)}})}))))}function Ct(e){var t=e.segments,n=t[t.length-1].t-t[0].t;return e.segments.map((function(e){return(e.t-t[0].t)/n}))}var Dt=Object(C.a)((function(){return{anim:{opacity:.8,strokeDasharray:2,strokeDashoffset:2},highlight:{opacity:.4}}})),Mt=Object(C.a)((function(){return{anim:{opacity:.8,strokeDashoffset:2},highlight:{opacity:.4}}})),Nt=Object(C.a)((function(){return{highlight:{opacity:.25},maskPath:{stroke:"black",opacity:1}}}));function Rt(e,t){return(e.segments[e.segments.length-1].t-e.segments[0].t)/t}var It=Object(C.a)((function(){return{doorMarker:{cursor:"pointer",pointerEvents:"auto"},door:{strokeWidth:"0.2"},undefinedDoor:{stroke:"grey"},doorOpen:{stroke:"#AFDDAE",strokeDasharray:.1},doorClose:{stroke:"#BC4812"},doorProcess:{stroke:"#E9CE9F",strokeDasharray:.3},doorTransparent:{stroke:"transparent"}}})),Ft=function(e){var t=e.v1,n=e.v2,a=e.style,o=e.onClick,i=Object(k.a)(t,2),c=i[0],l=i[1],s=Object(k.a)(n,2),u=s[0],d=s[1],f=It();return r.a.createElement("g",{onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return o&&o(e)}))},r.a.createElement("line",{className:"".concat(f.doorMarker," ").concat(f.door," ").concat(a||f.undefinedDoor),x1:c,y1:l,x2:u,y2:d}))},Pt=function(e){var t=e.currentMode,n=e.onClick,a=e.v1,o=e.v2,i=Object(k.a)(a,2),c=i[0],l=i[1],s=Object(k.a)(o,2),u=c,d=l,f=s[0],m=s[1],v=It();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ft,{v1:[u,-d],v2:[f,-m],style:Ut(v,t)}),r.a.createElement(Ft,{v1:[u,-d],v2:[f,-m],style:v.doorTransparent,onClick:n}))},Tt=function(e){var t=e.door,n=e.v1,a=e.v2,o=e.onClick,i=e.currentMode,c=Object(k.a)(n,2),l=c[0],s=c[1],u=Object(k.a)(a,2),d=u[0],f=u[1],m=l,v=s,p=d,b=f,E=m+(d-l)/2,h=v+(f-s)/2;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pt,{v1:[m,v],v2:[E,h],door:t,onClick:o,currentMode:i}),r.a.createElement(Pt,{v1:[E,h],v2:[p,b],door:t,onClick:o,currentMode:i}))},At=function(e){var t=e.currentMode,n=e.onClick,a=e.v1,o=e.v2,i=Object(k.a)(a,2),c=i[0],l=i[1],s=Object(k.a)(o,2),u=c,d=l,f=s[0],m=s[1],v=It();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ft,{v1:[u,-d],v2:[f,-m],style:Ut(v,t)}),r.a.createElement(Ft,{v1:[u,-d],v2:[f,-m],style:v.doorTransparent,onClick:n}))},Bt=function(e){var t=e.door,n=e.v1,a=e.v2,o=e.onClick,i=e.currentMode,c=Object(k.a)(n,2),l=c[0],s=c[1],u=Object(k.a)(a,2),d=u[0],f=u[1],m=l,v=s,p=d,b=f,E=m+(d-l)/2,h=v+(f-s)/2;return r.a.createElement(r.a.Fragment,null,r.a.createElement(At,{v1:[m,v],v2:[E,h],door:t,onClick:o,currentMode:i}),r.a.createElement(At,{v1:[E,h],v2:[p,b],door:t,onClick:o,currentMode:i}))},Ut=function(e,t){var n=E.DoorMode,a=n.MODE_OPEN,r=n.MODE_MOVING;switch(t){case a:return e.doorOpen;case r:return e.doorProcess;default:return e.doorClose}},Gt=r.a.forwardRef((function(e,t){var n=e.door,a=e.onClick,o=e.currentMode,i=E.Door,c=i.DOOR_TYPE_UNDEFINED,l=i.DOOR_TYPE_SINGLE_SLIDING,s=i.DOOR_TYPE_DOUBLE_SLIDING,u=i.DOOR_TYPE_SINGLE_TELESCOPE,d=i.DOOR_TYPE_DOUBLE_TELESCOPE,f=i.DOOR_TYPE_SINGLE_SWING,m=i.DOOR_TYPE_DOUBLE_SWING,v=n.door_type,p=[n.v1_x,n.v1_y],b=[n.v2_x,n.v2_y],h=function(e){a&&a(e,n)};return r.a.createElement(r.a.Fragment,null,v===f&&r.a.createElement(Pt,{v1:p,v2:b,door:n,onClick:h,currentMode:o}),v===m&&r.a.createElement(Tt,{v1:p,v2:b,door:n,onClick:h,currentMode:o}),(v===l||v===u)&&r.a.createElement(At,{v1:p,v2:b,door:n,onClick:h,currentMode:o}),(v===s||v===d)&&r.a.createElement(Bt,{v1:p,v2:b,door:n,onClick:h,currentMode:o}),v===c&&r.a.createElement(Ft,{v1:p,v2:b,onClick:h}))}));function qt(e){var t=e.doors,n=e.onDoorClick,o=Object(H.a)(e,["doors","onDoorClick"]),i=mt(e.bounds),c=Object(a.useContext)(Wt),l=function(e){var t=c&&c[e];return t&&t.current_mode.value};return r.a.createElement(r.a.Fragment,null,r.a.createElement(bt,o,r.a.createElement("svg",{viewBox:i},t.map((function(e){return r.a.createElement(Gt,{key:"building-door-".concat(e.name),door:e,onClick:function(e,t){return n&&n(t)},doorState:c&&c[e.name],currentMode:l(e.name)})})))))}var Wt=Object(a.createContext)({}),Vt=function(e){var t,n,a,o,i=e.x,c=e.y,l=e.size,s=void 0===l?1:l,u=e.strokeWidth,d=void 0===u?.01:u,f=e.padding;return t=i-i/2*s,a=i+i/2*s,o=n=c<0?c+c*s:c-c*s,r.a.createElement(Yt,{x1:i,y1:c,x2:t,y2:n,x3:a,y3:o,strokeWidth:d,padding:f})},zt=function(e){var t,n,a,o,i=e.x,c=e.y,l=e.size,s=void 0===l?1:l,u=e.strokeWidth,d=e.padding;return t=i-i/2*s,a=i+i/2*s,o=n=c<0?c-c*s:c+c*s,r.a.createElement(Yt,{x1:i,y1:c,x2:t,y2:n,x3:a,y3:o,strokeWidth:u,padding:d})},Yt=function(e){var t=e.x1,n=e.y1,a=e.x2,o=e.y2,i=e.x3,c=e.y3,l=e.strokeWidth,s=e.padding,u=void 0===s?[0,0]:s,d=Ht();return r.a.createElement("polygon",{points:"".concat(t+u[0],",").concat(n+u[1]," ")+"".concat(a+u[0],",").concat(o+u[1]," ")+"".concat(i+u[0],",").concat(c+u[1]),strokeWidth:l,className:d.arrow})},Ht=Object(C.a)((function(){return{arrow:{fill:"black"}}}));var Kt=r.a.forwardRef((function(e,t){var n,a,o,i,c=e.lift,l=e.onClick,s=e.liftState,u=e.currentFloor,d=c.width,f=c.depth,m=c.ref_x,v=c.ref_y,p=c.ref_yaw,b=c.doors,h=function(e,t,n,a){return{x:e-n/2,y:t+a/2}}(m,v,d,f),g=h.x,O=-v,x=-h.y,y=null===s||void 0===s?void 0:s.current_mode,_=null===s||void 0===s?void 0:s.destination_floor,k=null===s||void 0===s?void 0:s.door_state,j=(null===s||void 0===s?void 0:s.current_floor)===u,S=null===s||void 0===s?void 0:s.motion_state,w=Jt(),L=function(e,t,n){var a=E.LiftState,r=a.MODE_AGV,o=a.MODE_EMERGENCY,i=a.MODE_FIRE,c=a.MODE_HUMAN,l=a.MODE_OFFLINE,s=a.MODE_UNKNOWN,u=t===r,d=t===c;return t===o?e.emergency:t===i?e.fire:t===l?e.offLine:n&&u?e.liftOnCurrentFloor:n&&d?e.humanMode:n&&t===s?e.unknownLift:n?void 0:e.liftMoving}(w,y,j),C=function(e,t,n){var a=E.LiftState,r=a.MOTION_DOWN,o=a.MOTION_UP,i=a.MOTION_STOPPED;return n===a.MOTION_UNKNOWN?"?":n===i?e||"STOPPED":n===o||n===r?"".concat(e," \u2192 ").concat(t):"Floor: ?"}(null===s||void 0===s?void 0:s.current_floor,_,S),D=function(e){var t=E.LiftState,n=t.MODE_EMERGENCY,a=t.MODE_FIRE,r=t.MODE_OFFLINE;return e===a?"FIRE!":e===n?"EMERGENCY!":e===r?"OFFLINE":void 0}(y);return r.a.createElement(r.a.Fragment,null,r.a.createElement("g",{ref:t,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return l&&l(e,c)}))},r.a.createElement("rect",{className:"".concat(w.liftMarker," ").concat(w.lift," ").concat(L),width:d,height:f,x:g,y:x,rx:"0.1",ry:"0.1",transform:"rotate(".concat((i=p,i*(180/Math.PI)),", ").concat(m,",").concat(O,")")}),C&&r.a.createElement("text",{id:"liftMotion",className:w.liftText,x:m,y:(n=x,a=f,o=.25,n+a*o)},C),D&&r.a.createElement("text",{id:"liftMode",className:w.liftText,x:m,y:O},D)),S===E.LiftState.MOTION_UP&&r.a.createElement(zt,{x:m,y:O,size:.03,padding:[0,.1]}),S===E.LiftState.MOTION_DOWN&&r.a.createElement(Vt,{x:m,y:O,size:.03,padding:[0,.1]}),b.map((function(e){return r.a.createElement(Gt,{key:"lift-door-".concat(e.name),door:e,currentMode:k})})))})),Jt=Object(C.a)((function(){return{liftMarker:{cursor:"pointer",pointerEvents:"auto"},lift:{strokeWidth:"0.2"},liftOnCurrentFloor:{fill:"green",opacity:"70%"},liftMoving:{fill:"grey",opacity:"70%"},unknownLift:{fill:"#3d3c3c",opacity:"80%"},emergency:{fill:"red",opacity:"80%"},fire:{fill:"#ff562a",opacity:"80%"},offLine:{fill:"yellow",opacity:"80%"},humanMode:{fill:"#90dfef",opacity:"80%"},liftText:{dominantBaseline:"central",textAnchor:"middle",fontSize:"0.18px",fontWeight:"bold"}}}));function Qt(e){var t=e.lifts,n=e.onLiftClick,o=e.currentFloor,i=Object(H.a)(e,["lifts","onLiftClick","currentFloor"]),c=mt(e.bounds),l=Object(a.useContext)(Xt);return r.a.createElement(r.a.Fragment,null,r.a.createElement(bt,i,r.a.createElement("svg",{viewBox:c},t.map((function(e){return r.a.createElement(Kt,{key:"lift-".concat(e.name),lift:e,onClick:function(e,t){return n&&n(t)},liftState:l&&l[e.name],currentFloor:o})})))))}var Xt=Object(a.createContext)({}),Zt=Object(C.a)((function(){return{map:{height:"100%",width:"100%",margin:0,padding:0}}}));function $t(e){if(e.length){var t=new at.LatLngBounds([0,0],[0,0]);return Object.values(e).forEach((function(e){return t.extend(e.bounds)})),t.pad(.2)}}function en(e){var t=Zt(),n=r.a.useRef(null),a=n.current,o=r.a.useState({}),i=Object(k.a)(o,2),c=i[0],u=i[1],d=r.a.useMemo((function(){return e.buildingMap.levels.sort((function(e,t){return e.elevation-t.elevation})).map((function(e){return e.name}))}),[e.buildingMap]),f=r.a.useState((function(){return d[0]})),m=Object(k.a)(f,2),p=m[0],b=m[1],E=r.a.useMemo((function(){return c[p]}),[p,c]),h=r.a.useState({}),g=Object(k.a)(h,2),O=g[0],x=g[1],y=r.a.useMemo((function(){var e=c[d[0]];if(e)return e.bounds}),[c,d]),_=r.a.useState((function(){return $t(Object.values(c))})),j=Object(k.a)(_,2),L=j[0],C=j[1],D=r.a.useMemo((function(){return E?e.fleets.flatMap((function(e){return e.robots.filter((function(e){return e.location.level_name===E.level.name}))})):[]}),[e.fleets,E]),M=r.a.useMemo((function(){return new ft}),[]),N=r.a.useContext(z),R=r.a.useMemo((function(){switch(N.trajectoryAnimationSpeed){case w.Slow:return 4e3;case w.Normal:return 2e3;case w.Fast:return 1e3}}),[N]),I=r.a.useMemo((function(){var e=6e4/R;switch(N.trajectoryAnimation){case S.None:return _t;case S.Fill:return function(e,t){return function(n){var a=Dt(),o=n.trajectory,i=r.a.useRef(null);return r.a.useLayoutEffect((function(){var e;if(i.current){var n=Ct(o),r=i.current.cloneNode(!1);return r.classList.add(a.anim),r.classList.remove(a.highlight),r.setAttribute("path-length","1"),null===(e=i.current.parentElement)||void 0===e||e.appendChild(r),r.animate(n.map((function(e){return{offset:e,strokeDashoffset:2-e}})),{duration:Rt(o,t),easing:"linear",fill:"forwards"}),function(){return r.remove()}}}),[o,a.anim,a.highlight]),r.a.createElement("g",null,r.a.createElement(e,Object.assign({ref:i},n,{className:a.highlight})))}}(_t,e);case S.Follow:return function(e,t){return function(n){var a=Mt(),o=n.trajectory,i=r.a.useRef(null);return r.a.useLayoutEffect((function(){var e;if(i.current){var n=Ct(o),r=i.current.cloneNode(!1);r.classList.add(a.anim),r.classList.remove(a.highlight),r.setAttribute("path-length","1");var c=Number(r.getAttribute("stroke-width")||1)/r.getTotalLength();return r.setAttribute("stroke-dasharray","".concat(c," ").concat(2-c)),null===(e=i.current.parentElement)||void 0===e||e.appendChild(r),r.animate(n.map((function(e){return{offset:e,strokeDashoffset:Math.max(2-e,c+1)}})),{duration:Rt(o,t),easing:"linear",fill:"forwards"}),function(){return r.remove()}}}),[o,a.anim,a.highlight]),r.a.createElement("g",null,r.a.createElement(e,Object.assign({ref:i},n,{className:a.highlight})))}}(_t,e);case S.Outline:return function(e,t){return function(n){var a=Nt(),o=n.trajectory,i=r.a.useRef(null);return r.a.useLayoutEffect((function(){if(i.current&&i.current.parentElement){var e=Ct(o),n=i.current.parentElement,r=document.createElementNS("http://www.w3.org/2000/svg","mask");r.setAttribute("id","".concat(o.id,"-mask"));var c=document.createElementNS("http://www.w3.org/2000/svg","rect");c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("width","100%"),c.setAttribute("height","100%"),c.setAttribute("fill","white"),r.appendChild(c);var l=i.current.cloneNode(!1);l.classList.add(a.maskPath);var s=i.current.getAttribute("stroke-width");s&&l.setAttribute("stroke-width",(parseFloat(s)-.1).toString()),r.appendChild(l),n.appendChild(r);var u=i.current.cloneNode(!1);return u.removeAttribute("mask"),u.classList.add(a.highlight),n.appendChild(u),i.current.animate(e.map((function(e){return{offset:e,strokeDashoffset:2-e}})),{duration:Rt(o,t),easing:"linear",fill:"forwards"}),function(){u.remove(),r.remove()}}}),[o,a.highlight,a.maskPath]),r.a.createElement("g",null,r.a.createElement(e,Object.assign({ref:i},n,{mask:"url(#".concat(o.id,"-mask)")})))}}(_t,e)}}),[N.trajectoryAnimation,R]);r.a.useEffect((function(){a&&Object(s.a)(l.a.mark((function t(){var n,a,r,o,i,c,s,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],a={},r=Object(v.a)(e.buildingMap.levels),t.prev=3,i=function(){var e=o.value,t=e.images[0];if(!t)return"continue";n.push(new Promise((function(n){var r=new Image,o=st(t.data);r.src=o;r.addEventListener("load",(function i(){r.removeEventListener("load",i);var c=r.naturalWidth*t.scale,l=r.naturalHeight*t.scale,s=new at.LatLngBounds([t.y_offset,t.x_offset],[t.y_offset-l,t.x_offset+c]);a[e.name]={level:e,imageUrl:o,bounds:s},n()}))})))},r.s();case 6:if((o=r.n()).done){t.next=12;break}if("continue"!==i()){t.next=10;break}return t.abrupt("continue",10);case 10:t.next=6;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),r.e(t.t0);case 17:return t.prev=17,r.f(),t.finish(17);case 20:c=0,s=n;case 21:if(!(c<s.length)){t.next=28;break}return d=s[c],t.next=25,d;case 25:c++,t.next=21;break;case 28:u(a),C($t(Object.values(a)));case 30:case"end":return t.stop()}}),t,null,[[3,14,17,20]])})))()}),[e.buildingMap,a]),r.a.useEffect((function(){var t;return Object(s.a)(l.a.mark((function n(){var a,r,o;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=function(){return(o=Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E&&a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.latestTrajectory({request:"trajectory",param:{map_name:E.level.name,duration:6e4,trim:!0}});case 4:t=e.sent,x((function(e){return Object(T.a)({},e,Object(Y.a)({},E.level.name,t))}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},r=function(){return o.apply(this,arguments)},a=e.trajManager,n.next=5,r();case 5:t=window.setInterval(r,R);case 6:case"end":return n.stop()}}),n)})))(),function(){return clearInterval(t)}}),[e.trajManager,E,R]);var F=d.map((function(e){return c[e]})),P=r.a.useRef(null);return P.current&&P.current.leafletElement.setZIndex(0),r.a.createElement(rt.a,{ref:n,className:t.map,attributionControl:!1,crs:at.CRS.Simple,minZoom:4,maxZoom:8,zoomDelta:.5,zoomSnap:.5,bounds:y,maxBounds:L,onbaselayerchange:function(e){b(e.name)}},r.a.createElement(ot.a,{position:"bottomright",prefix:"OSRC-SG"}),r.a.createElement(it.a,{position:"topleft"},F.every((function(e){return e}))&&F.map((function(e,t){return r.a.createElement(it.a.BaseLayer,{checked:0===t,name:e.level.name,key:e.level.name},r.a.createElement(ct.a,{bounds:e.bounds,url:e.imageUrl,ref:P}))})),r.a.createElement(it.a.Overlay,{name:"Places",checked:!0},E&&r.a.createElement(lt.a,null,r.a.createElement(Et,{bounds:E.bounds,places:E.level.places,onPlaceClick:e.onPlaceClick}))),r.a.createElement(it.a.Overlay,{name:"Robot Trajectories",checked:!0},E&&r.a.createElement(lt.a,null,r.a.createElement(jt.Provider,{value:{Component:I}},r.a.createElement(kt,{bounds:E.bounds,trajs:function(e){var t=O[e];return t?t.values:[]}(E.level.name),conflicts:function(e){var t=O[e];return t?t.conflicts:[]}(E.level.name),colorManager:M})))),r.a.createElement(it.a.Overlay,{name:"Doors",checked:!0},E&&r.a.createElement(lt.a,null,r.a.createElement(qt,{bounds:E.bounds,doors:E.level.doors,onDoorClick:e.onDoorClick}))),r.a.createElement(it.a.Overlay,{name:"Lifts",checked:!0},E&&r.a.createElement(lt.a,null,r.a.createElement(Qt,{bounds:E.bounds,currentFloor:p,lifts:e.buildingMap.lifts,onLiftClick:e.onLiftClick}))),r.a.createElement(it.a.Overlay,{name:"Robots",checked:!0},E&&r.a.createElement(lt.a,null,r.a.createElement(Lt,{bounds:E.bounds,robots:D,colorManager:M,onRobotClick:e.onRobotClick})))))}var tn=n(213),nn=n(206),an=n(207),rn=n(229),on=n(214),cn=n(223);function ln(e){var t=un(),n=e.settings,a=e.onSettingsChange,o=Object(H.a)(e,["settings","onSettingsChange"]),i=n.trajectoryAnimation,c=r.a.useMemo((function(){return Object.keys(S).slice(.5*Object.keys(S).length)}),[]);return r.a.createElement(tn.a,Object.assign({PaperProps:{className:t.drawer},anchor:"right"},o),r.a.createElement(nn.a,{component:"fieldset"},r.a.createElement(an.a,{component:"legend",className:t.legendLabel},"Trajectory Animation"),r.a.createElement(ee.a,null),r.a.createElement(rn.a,{className:t.trajGroup,value:i,onChange:function(e){var t=Object(T.a)({},n,{trajectoryAnimation:Number(e.target.value)});a&&a(t)}},c.map((function(e,n){return r.a.createElement(on.a,{key:n,className:t.flexBasis,value:n,control:r.a.createElement(cn.a,null),label:e})})))))}var sn,un=Object(C.a)((function(e){return{drawer:{width:300},legendLabel:{fontSize:e.typography.h6.fontSize,padding:e.spacing(1)},trajGroup:{flexDirection:"row",paddingLeft:e.spacing(2)},flexBasis:{flexBasis:"40%"}}})),dn=Object(C.a)((function(e){return{container:{display:"flex",flexFlow:"column",height:"100%"},toolBarTitle:{flexGrow:1},omniPanel:{position:"fixed",width:350,top:80,right:"1%",bottom:"2%",backgroundColor:e.palette.background.default,zIndex:1024,borderTopLeftRadius:20,borderTopRightRadius:20,boxShadow:e.shadows[12]},topLeftBorder:{borderTopLeftRadius:20},topRightBorder:{borderTopRightRadius:20}}}));!function(e){e[e.MainMenu=0]="MainMenu",e[e.Doors=1]="Doors",e[e.Lifts=2]="Lifts",e[e.Robots=3]="Robots",e[e.Places=4]="Places",e[e.Dispensers=5]="Dispensers"}(sn||(sn={}));var fn=function(){function e(t,n){Object(u.a)(this,e),this.value=t,this.parent=n}return Object(d.a)(e,[{key:"addChild",value:function(t){return new e(t,this)}}]),e}();var mn=function(){var e={},t=new fn(sn.MainMenu);return e[sn.MainMenu]=t,e[sn.Doors]=t.addChild(sn.Doors),e[sn.Lifts]=t.addChild(sn.Lifts),e[sn.Robots]=t.addChild(sn.Robots),e[sn.Places]=t.addChild(sn.Places),e[sn.Dispensers]=t.addChild(sn.Dispensers),e}();function vn(e){var t=dn(),n=e.appConfig,a=n.transportFactory,o=n.trajectoryManagerFactory,i=r.a.useState(void 0),c=Object(k.a)(i,2),u=c[0],d=c[1],f=r.a.useState(void 0),m=Object(k.a)(f,2),v=m[0],p=m[1],b=r.a.useRef(void 0),h=r.a.useMemo((function(){return new G}),[]),O=r.a.useState((function(){return h.doorStates()})),x=Object(k.a)(O,2),y=x[0],_=x[1],j=r.a.useState([]),S=Object(k.a)(j,2),w=S[0],L=S[1],C=r.a.useState(void 0),T=Object(k.a)(C,2),A=T[0],B=T[1],Y=r.a.useMemo((function(){return new W}),[]),H=r.a.useState((function(){return Y.liftStates()})),K=Object(k.a)(H,2),J=K[0],Q=K[1],X=r.a.useState([]),Z=Object(k.a)(X,2),$=Z[0],ee=Z[1],te=r.a.useState(void 0),ne=Object(k.a)(te,2),ae=ne[0],re=ne[1],ie=r.a.useMemo((function(){return new q}),[]),ce=r.a.useState(ie.fleets()),le=Object(k.a)(ce,2),se=le[0],ue=le[1],fe=r.a.useState(void 0),me=Object(k.a)(fe,2),ve=me[0],pe=me[1],be=r.a.useState(void 0),Ee=Object(k.a)(be,2),he=Ee[0],ge=Ee[1],xe=r.a.useMemo((function(){return new U}),[]),ye=r.a.useState({}),_e=Object(k.a)(ye,2),ke=_e[0],je=_e[1],Le=r.a.useState(void 0),Ce=Object(k.a)(Le,2),De=Ce[0],Me=Ce[1],Ie=r.a.useState(!0),Fe=Object(k.a)(Ie,2),Te=Fe[0],Ae=Fe[1],Be=r.a.useState(sn.MainMenu),Ue=Object(k.a)(Be,2),Ge=Ue[0],qe=Ue[1],We=r.a.useState({caption:"Connecting to SOSS..."}),Ve=Object(k.a)(We,2),ze=Ve[0],Ye=Ve[1],He=r.a.useState(!1),Ke=Object(k.a)(He,2),Je=Ke[0],Qe=Ke[1],Xe=r.a.useState((function(){return function(){var e=localStorage.getItem("settings");return e?JSON.parse(e):V()}()})),Ze=Object(k.a)(Xe,2),$e=Ze[0],et=Ze[1];function tt(){B(void 0),re(void 0),pe(void 0),Me(void 0)}function at(){tt(),Ae(!1)}return r.a.useEffect((function(){Ye({caption:"Connecting to SOSS server..."}),a().then((function(e){e.on("error",console.error),e.once("close",(function(){Ye({caption:"Lost connection to SOSS",variant:"error"}),d(void 0)})),h.startSubscription(e),xe.startSubscription(e),Y.startSubscription(e),ie.startSubscription(e),ie.on("updated",(function(){return ue(ie.fleets())})),Y.on("updated",(function(){return Q(Y.liftStates())})),h.on("updated",(function(){return _(h.doorStates())})),d(e)})).catch((function(e){Ye({caption:"Unable to connect to SOSS server (".concat(e.code,")"),variant:"error"})}))}),[a,h,Y,xe,ie]),r.a.useEffect((function(){if(u){Ye({caption:"Downloading building map..."});var e=new E.GetBuildingMap_Request;u.call(E.getBuildingMap,e).then((function(e){p(e.building_map),Ye(null)})).catch((function(){Ye({caption:"Unable to download building map",variant:"error"})}))}}),[u]),r.a.useEffect((function(){o&&Object(s.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:b.current=e.sent;case 3:case"end":return e.stop()}}),e)})))()}),[o]),r.a.useEffect((function(){if(Ge===sn.Doors){var e=function(){return _(h.doorStates())};return h.on("updated",e),g.a.log("started tracking door states"),function(){h.off("updated",e),g.a.log("stopped tracking door states")}}}),[Ge,h]),r.a.useEffect((function(){if(Ge===sn.Lifts){var e=function(){return Q(Y.liftStates())};return Y.on("updated",e),g.a.log("started tracking lift states"),function(){Y.off("updated",e),g.a.log("stopped tracking lift states")}}}),[Ge,Y]),r.a.useEffect((function(){if(Ge===sn.Dispensers){var e=function(){return je(xe.dispenserStates())};return xe.on("updated",e),g.a.log("started tracking dispenser states"),function(){xe.off("updated",e),g.a.log("stopped tracking dispenser states")}}}),[Ge,xe]),r.a.useEffect((function(){L(v?v.levels.flatMap((function(e){return e.doors})):[]),ee(v?v.lifts:[])}),[v]),r.a.createElement(r.a.Fragment,null,r.a.createElement(z.Provider,{value:$e},ze&&r.a.createElement(Se,ze),r.a.createElement("div",{className:t.container},r.a.createElement(D.a,{position:"static"},r.a.createElement(M.a,null,r.a.createElement(N.a,{variant:"h6",className:t.toolBarTitle},"Dashboard"),r.a.createElement(R.a,{color:"inherit",onClick:function(){return Ae(!Te)}},r.a.createElement(F.a,null)),r.a.createElement(R.a,{color:"inherit",onClick:function(){return Qe(!0)}},r.a.createElement(P.a,null)))),v&&r.a.createElement(Wt.Provider,{value:y},r.a.createElement(Xt.Provider,{value:J},r.a.createElement(en,{buildingMap:v,fleets:se,trajManager:b.current,onDoorClick:function(e){Ae(!0),qe(sn.Doors),B({value:e.name})},onLiftClick:function(e){Ae(!0),qe(sn.Lifts),re({value:e.name})},onPlaceClick:function(e){Ae(!0),qe(sn.Places),ge({value:e.name})},onRobotClick:function(e){Ae(!0),qe(sn.Robots),pe({value:e.name})}}))),r.a.createElement(I.a,{in:Te},r.a.createElement(Ne,{className:t.omniPanel,classes:{backButton:t.topLeftBorder,closeButton:t.topRightBorder},view:Ge,onBack:function(e){tt();var t=mn[e].parent;if(!t)return at();qe(t.value)},onClose:at},r.a.createElement(Re,{id:sn.MainMenu},r.a.createElement(we,{onDoorsClick:function(){_(h.doorStates()),qe(sn.Doors)},onLiftsClick:function(){Q(Y.liftStates()),qe(sn.Lifts)},onRobotsClick:function(){qe(sn.Robots)},onPlacesClick:function(){qe(sn.Places)},onDispensersClick:function(){qe(sn.Dispensers)}})),r.a.createElement(Re,{id:sn.Doors},r.a.createElement(de,{transport:u,doorStates:y,doors:w,spotlight:A})),r.a.createElement(Re,{id:sn.Lifts},r.a.createElement(Oe,{transport:u,liftStates:J,lifts:$,spotlight:ae})),r.a.createElement(Re,{id:sn.Robots},r.a.createElement(nt,{transport:u,fleets:se,spotlight:ve})),r.a.createElement(Re,{id:sn.Places},v&&r.a.createElement(Pe,{buildingMap:v,spotlight:he})),r.a.createElement(Re,{id:sn.Dispensers},r.a.createElement(oe,{dispenserStates:ke,spotlight:De})))),r.a.createElement(ln,{settings:$e,open:Je,onSettingsChange:function(e){et(e),function(e){localStorage.setItem("settings",JSON.stringify(e))}(e)},onClose:function(){return Qe(!1)}}))))}n(145);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));!function(){var e=at.Map.prototype._initControlPos;at.Map.include({_initControlPos:function(){e.call(this),this._controlCorners.topcenter=at.DomUtil.create("div","leaflet-top leaflet-horizontal-center",this._controlContainer),this._controlCorners.bottomcenter=at.DomUtil.create("div","leaflet-bottom leaflet-horizontal-center",this._controlContainer),this._controlCorners.leftcenter=at.DomUtil.create("div","leaflet-left leaflet-vertical-center",this._controlContainer),this._controlCorners.rightcenter=at.DomUtil.create("div","leaflet-right leaflet-vertical-center",this._controlContainer),this._controlCorners.center=at.DomUtil.create("div","leaflet-horizontal-center leaflet-vertical-center",this._controlContainer)}})}(),i.a.render(r.a.createElement(vn,{appConfig:L}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},84:function(e){e.exports=JSON.parse('[{"conflicts":[],"response":"trajectory","values":[{"dimensions":0.3,"id":1837,"segments":[{"t":239324,"v":[-0.001401927254032181,0.21824042930153223,0],"x":[16.85562071895633,-6.849610535047465,-1.5643726408832297]},{"t":239699,"v":[-0.003211820867103254,0.4999896841002998,0],"x":[16.85475408767907,-6.714700552056854,-1.5643726408832297]},{"t":241987,"v":[-0.003211820867103254,0.4999896841002998,0],"x":[16.84740548179414,-5.57073042202407,-1.5643726408832297]},{"t":242654,"v":[1.278274362638684e-15,-4.246603073437827e-15,0],"x":[16.84633487483844,-5.404067193990637,-1.5643726408832297]}],"shape":"circle"},{"dimensions":0.3,"id":1841,"segments":[{"t":239324,"v":[0.0034009382612697737,0.49998843339066873,0],"x":[15.143808594955617,-8.290715147984928,-1.5842777490615845]},{"t":241762,"v":[0.003400938261912188,0.49998843348515437,0],"x":[15.152102246355314,-7.071425219188716,-1.5842777490615845]},{"t":242429,"v":[0,0,0],"x":[15.153235892442618,-6.904762408026998,-1.5842777490615845]},{"t":242729,"v":[0,0,-0.6],"x":[15.153235892442618,-6.904762408026998,-1.6742777490615846]},{"t":245001,"v":[0,0,-0.6],"x":[15.153235892442618,-6.904762408026998,-3.0378505480504017]},{"t":245301,"v":[0,0,0],"x":[15.153235892442618,-6.904762408026998,-3.1278505480504015]},{"t":245968,"v":[0.4999527893768024,0.006870836510545718,0],"x":[15.319886822234885,-6.90247212919015,-3.1278505480504015]},{"t":248707,"v":[0.4999527893768024,0.006870836510545718,0],"x":[16.6891737648425,-6.883654058927136,-3.1278505480504015]},{"t":249374,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-3.1278505480504015]},{"t":249674,"v":[0,0,0.6],"x":[16.85582469463477,-6.881363780090288,-3.0378505480504017]},{"t":251979,"v":[0,0,0.6],"x":[16.85582469463477,-6.881363780090288,-1.6543726408832296]},{"t":252279,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-1.5643726408832297]},{"t":252946,"v":[-0.003211820867103254,0.4999896841002998,0],"x":[16.85475408767907,-6.714700552056854,-1.5643726408832297]},{"t":255234,"v":[-0.003211820867103254,0.4999896841002998,0],"x":[16.84740548179414,-5.57073042202407,-1.5643726408832297]},{"t":255901,"v":[1.278274362638684e-15,-4.246603073437827e-15,0],"x":[16.84633487483844,-5.404067193990637,-1.5643726408832297]}],"shape":"circle"}]},{"conflicts":[1904,1903],"response":"trajectory","values":[{"dimensions":0.3,"id":1903,"segments":[{"t":249436,"v":[0,0,0],"x":[16.84633487483844,-5.404067193990636,-1.5643726587295532]},{"t":258735,"v":[0,0,0],"x":[16.84633487483844,-5.404067193990636,-1.5643726587295532]},{"t":259401,"v":[0.003211820867103254,-0.4999896841002998,0],"x":[16.84740548179414,-5.57073042202407,-1.5643726587295532]},{"t":261689,"v":[0.003211820867103254,-0.4999896841002998,0],"x":[16.85475408767907,-6.714700552056854,-1.5643726587295532]},{"t":262356,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-1.5643726587295532]},{"t":262656,"v":[0,0,-0.6],"x":[16.85582469463477,-6.881363780090288,-1.6543726587295533]},{"t":264962,"v":[0,0,-0.6],"x":[16.85582469463477,-6.881363780090288,-3.037850548050402]},{"t":265262,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-3.1278505480504015]},{"t":265928,"v":[-0.49993337241422175,-0.008162300321788229,0],"x":[16.689180237163363,-6.884084546864218,-3.1278505480504015]},{"t":275671,"v":[-0.49993337241422175,-0.008162300321788229,0],"x":[11.818246896502632,-6.963611185747893,-3.1278505480504015]},{"t":276338,"v":[0,0,0],"x":[11.651602439031224,-6.966331952521823,-3.1278505480504015]},{"t":276638,"v":[0,0,0.6],"x":[11.651602439031224,-6.966331952521823,-3.0378505480504017]},{"t":278870,"v":[0,0,0.6],"x":[11.651602439031224,-6.966331952521823,-1.6985789473059278]},{"t":279170,"v":[0,0,0],"x":[11.651602439031224,-6.966331952521823,-1.6085789473059282]},{"t":279837,"v":[-0.01888681593558913,-0.4996431608496359,0],"x":[11.645306833719362,-7.132879672805035,-1.6085789473059282]},{"t":283652,"v":[-0.01888681593558913,-0.4996431608496359,0],"x":[11.573243095223296,-9.039297049223038,-1.6085789473059282]},{"t":284319,"v":[-1.7069678995076942e-15,5.828670876367736e-16,0],"x":[11.566947489911431,-9.20584476950625,-1.6085789473059282]}],"shape":"circle"},{"dimensions":0.3,"id":1904,"segments":[{"t":249436,"v":[0.4999527894260443,0.006870836511221926,0],"x":[16.18029053673847,-6.8906476261949985,-3.1278505480504015]},{"t":250453,"v":[0.4999527893768024,0.006870836510545718,0],"x":[16.6891737648425,-6.883654058927136,-3.1278505480504015]},{"t":251120,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-3.1278505480504015]},{"t":251420,"v":[0,0,0.6],"x":[16.85582469463477,-6.881363780090288,-3.0378505480504017]},{"t":253726,"v":[0,0,0.6],"x":[16.85582469463477,-6.881363780090288,-1.6543726408832296]},{"t":254026,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-1.5643726408832297]},{"t":254692,"v":[-0.003211820867103254,0.4999896841002998,0],"x":[16.85475408767907,-6.714700552056854,-1.5643726408832297]},{"t":256980,"v":[-0.003211820867103254,0.4999896841002998,0],"x":[16.84740548179414,-5.57073042202407,-1.5643726408832297]},{"t":257647,"v":[1.278274362638684e-15,-4.246603073437827e-15,0],"x":[16.84633487483844,-5.404067193990637,-1.5643726408832297]}],"shape":"circle"}]},{"conflicts":[1907,1906],"response":"trajectory","values":[{"dimensions":0.3,"id":1907,"segments":[{"t":259858,"v":[-0.0032118208663443754,0.4999896839820836,0],"x":[16.85349747577927,-6.519081614135527,-1.5643726408832297]},{"t":261754,"v":[-0.003211820867103254,0.4999896841002998,0],"x":[16.84740548179414,-5.57073042202407,-1.5643726408832297]},{"t":262421,"v":[1.278274362638684e-15,-4.246603073437827e-15,0],"x":[16.84633487483844,-5.404067193990637,-1.5643726408832297]}],"shape":"circle"},{"dimensions":0.3,"id":1906,"segments":[{"t":259858,"v":[0.0032118208664763444,-0.4999896840026444,0],"x":[16.848400854350075,-5.725681781516822,-1.5643726587295532]},{"t":261836,"v":[0.003211820867103254,-0.4999896841002998,0],"x":[16.85475408767907,-6.714700552056854,-1.5643726587295532]},{"t":262502,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-1.5643726587295532]},{"t":262802,"v":[0,0,-0.6],"x":[16.85582469463477,-6.881363780090288,-1.6543726587295533]},{"t":265108,"v":[0,0,-0.6],"x":[16.85582469463477,-6.881363780090288,-3.037850548050402]},{"t":265408,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-3.1278505480504015]},{"t":266075,"v":[-0.49993337241422175,-0.008162300321788229,0],"x":[16.689180237163363,-6.884084546864218,-3.1278505480504015]},{"t":275818,"v":[-0.49993337241422175,-0.008162300321788229,0],"x":[11.818246896502632,-6.963611185747893,-3.1278505480504015]},{"t":276485,"v":[0,0,0],"x":[11.651602439031224,-6.966331952521823,-3.1278505480504015]},{"t":276785,"v":[0,0,0.6],"x":[11.651602439031224,-6.966331952521823,-3.0378505480504017]},{"t":279017,"v":[0,0,0.6],"x":[11.651602439031224,-6.966331952521823,-1.6985789473059278]},{"t":279317,"v":[0,0,0],"x":[11.651602439031224,-6.966331952521823,-1.6085789473059282]},{"t":279983,"v":[-0.01888681593558913,-0.4996431608496359,0],"x":[11.645306833719362,-7.132879672805035,-1.6085789473059282]},{"t":283799,"v":[-0.01888681593558913,-0.4996431608496359,0],"x":[11.573243095223296,-9.039297049223038,-1.6085789473059282]},{"t":284466,"v":[-1.7069678995076942e-15,5.828670876367736e-16,0],"x":[11.566947489911431,-9.20584476950625,-1.6085789473059282]}],"shape":"circle"}]},{"conflicts":[1907,1906],"response":"trajectory","values":[{"dimensions":0.3,"id":1906,"segments":[{"t":267277,"v":[-0.4999333723957843,-0.008162300321487053,0],"x":[16.0883643931634,-6.893893932729247,-3.1278505480504015]},{"t":275818,"v":[-0.49993337241422175,-0.008162300321788229,0],"x":[11.818246896502632,-6.963611185747893,-3.1278505480504015]},{"t":276485,"v":[0,0,0],"x":[11.651602439031224,-6.966331952521823,-3.1278505480504015]},{"t":276785,"v":[0,0,0.6],"x":[11.651602439031224,-6.966331952521823,-3.0378505480504017]},{"t":279017,"v":[0,0,0.6],"x":[11.651602439031224,-6.966331952521823,-1.6985789473059278]},{"t":279317,"v":[0,0,0],"x":[11.651602439031224,-6.966331952521823,-1.6085789473059282]},{"t":279983,"v":[-0.01888681593558913,-0.4996431608496359,0],"x":[11.645306833719362,-7.132879672805035,-1.6085789473059282]},{"t":283799,"v":[-0.01888681593558913,-0.4996431608496359,0],"x":[11.573243095223296,-9.039297049223038,-1.6085789473059282]},{"t":284466,"v":[-1.7069678995076942e-15,5.828670876367736e-16,0],"x":[11.566947489911431,-9.20584476950625,-1.6085789473059282]}],"shape":"circle"}]},{"conflicts":[],"response":"trajectory","values":[{"dimensions":0.3,"id":1955,"segments":[{"t":271788,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-1.570629596710205]},{"t":280777,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-1.570629596710205]},{"t":281444,"v":[-0.003211820867103254,0.4999896841002998,0],"x":[16.85475408767907,-6.714700552056854,-1.570629596710205]},{"t":283732,"v":[-0.003211820867103254,0.4999896841002998,0],"x":[16.84740548179414,-5.57073042202407,-1.570629596710205]},{"t":284399,"v":[1.278274362638684e-15,-4.246603073437827e-15,0],"x":[16.84633487483844,-5.404067193990637,-1.570629596710205]}],"shape":"circle"},{"dimensions":0.3,"id":1954,"segments":[{"t":271788,"v":[-0.4999333723792078,-0.008162300321216218,0],"x":[15.282970764877057,-6.907043414308325,-3.1278505480504015]},{"t":278718,"v":[-0.49993337241422175,-0.008162300321788229,0],"x":[11.818246896502632,-6.963611185747893,-3.1278505480504015]},{"t":279385,"v":[0,0,0],"x":[11.651602439031224,-6.966331952521823,-3.1278505480504015]},{"t":279685,"v":[0,0,0.6],"x":[11.651602439031224,-6.966331952521823,-3.0378505480504017]},{"t":281917,"v":[0,0,0.6],"x":[11.651602439031224,-6.966331952521823,-1.6985789473059278]},{"t":282217,"v":[0,0,0],"x":[11.651602439031224,-6.966331952521823,-1.6085789473059282]},{"t":282883,"v":[-0.01888681593558913,-0.4996431608496359,0],"x":[11.645306833719362,-7.132879672805035,-1.6085789473059282]},{"t":286699,"v":[-0.01888681593558913,-0.4996431608496359,0],"x":[11.573243095223296,-9.039297049223038,-1.6085789473059282]},{"t":287366,"v":[-1.7069678995076942e-15,5.828670876367736e-16,0],"x":[11.566947489911431,-9.20584476950625,-1.6085789473059282]}],"shape":"circle"}]},{"conflicts":[1980,1979],"response":"trajectory","values":[{"dimensions":0.3,"id":1980,"segments":[{"t":291521,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-1.570629596710205]},{"t":296856,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-1.570629596710205]},{"t":297522,"v":[-0.003211820867103254,0.4999896841002998,0],"x":[16.85475408767907,-6.714700552056854,-1.570629596710205]},{"t":299810,"v":[-0.003211820867103254,0.4999896841002998,0],"x":[16.84740548179414,-5.57073042202407,-1.570629596710205]},{"t":300477,"v":[1.278274362638684e-15,-4.246603073437827e-15,0],"x":[16.84633487483844,-5.404067193990637,-1.570629596710205]}],"shape":"circle"},{"dimensions":0.3,"id":1979,"segments":[{"t":291521,"v":[0,0,0],"x":[16.84633487483844,-5.404067193990636,-1.5644471645355225]},{"t":298117,"v":[0,0,0],"x":[16.84633487483844,-5.404067193990636,-1.5644471645355225]},{"t":298783,"v":[0.003211820867103254,-0.4999896841002998,0],"x":[16.84740548179414,-5.57073042202407,-1.5644471645355225]},{"t":301071,"v":[0.003211820867103254,-0.4999896841002998,0],"x":[16.85475408767907,-6.714700552056854,-1.5644471645355225]},{"t":301738,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-1.5644471645355225]},{"t":302038,"v":[0,0,-0.6],"x":[16.85582469463477,-6.881363780090288,-1.6544471645355225]},{"t":304343,"v":[0,0,-0.6],"x":[16.85582469463477,-6.881363780090288,-3.0378505480504017]},{"t":304643,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-3.1278505480504015]},{"t":305310,"v":[-0.49993337241422175,-0.008162300321788229,0],"x":[16.689180237163363,-6.884084546864218,-3.1278505480504015]},{"t":315053,"v":[-0.49993337241422175,-0.008162300321788229,0],"x":[11.818246896502632,-6.963611185747893,-3.1278505480504015]},{"t":315720,"v":[0,0,0],"x":[11.651602439031224,-6.966331952521823,-3.1278505480504015]},{"t":316020,"v":[0,0,0.6],"x":[11.651602439031224,-6.966331952521823,-3.0378505480504017]},{"t":318252,"v":[0,0,0.6],"x":[11.651602439031224,-6.966331952521823,-1.6985789473059278]},{"t":318552,"v":[0,0,0],"x":[11.651602439031224,-6.966331952521823,-1.6085789473059282]},{"t":319219,"v":[-0.01888681593558913,-0.4996431608496359,0],"x":[11.645306833719362,-7.132879672805035,-1.6085789473059282]},{"t":323034,"v":[-0.01888681593558913,-0.4996431608496359,0],"x":[11.573243095223296,-9.039297049223038,-1.6085789473059282]},{"t":323701,"v":[-1.7069678995076942e-15,5.828670876367736e-16,0],"x":[11.566947489911431,-9.20584476950625,-1.6085789473059282]}],"shape":"circle"}]},{"conflicts":[1989,1988],"response":"trajectory","values":[{"dimensions":0.3,"id":1989,"segments":[{"t":310351,"v":[0,0,0],"x":[18.7395242949738,-6.873981868527042,-3.1376738367181622]},{"t":312176,"v":[0,0,0],"x":[18.7395242949738,-6.873981868527042,-3.1376738367181622]},{"t":312843,"v":[-0.499996160723495,-0.001959403420672278,0],"x":[18.57285890806597,-6.874635003000599,-3.1376738367181622]},{"t":315944,"v":[-0.499996160723495,-0.001959403420672278,0],"x":[17.0224900815426,-6.88071064561673,-3.1376738367181622]},{"t":316610,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-3.1376738367181622]},{"t":316910,"v":[0,0,-0.6],"x":[16.85582469463477,-6.881363780090288,3.055511470461424]},{"t":319224,"v":[0,0,-0.6],"x":[16.85582469463477,-6.881363780090288,1.6672200127065633]},{"t":319524,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,1.5772200127065634]},{"t":320191,"v":[-0.003211820867103254,0.4999896841002998,0],"x":[16.85475408767907,-6.714700552056854,1.5772200127065634]},{"t":322479,"v":[-0.003211820867103254,0.4999896841002998,0],"x":[16.84740548179414,-5.57073042202407,1.5772200127065634]},{"t":323146,"v":[1.278274362638684e-15,-4.246603073437827e-15,0],"x":[16.84633487483844,-5.404067193990637,1.5772200127065634]}],"shape":"circle"},{"dimensions":0.3,"id":1988,"segments":[{"t":310351,"v":[0.0032118208658522026,-0.4999896839052482,0],"x":[16.85201230352526,-6.287882292367029,-1.5644522905349731]},{"t":311204,"v":[0.003211820867103254,-0.4999896841002998,0],"x":[16.85475408767907,-6.714700552056854,-1.5644522905349731]},{"t":311871,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-1.5644522905349731]},{"t":312171,"v":[0,0,-0.6],"x":[16.85582469463477,-6.881363780090288,-1.6544522905349732]},{"t":314476,"v":[0,0,-0.6],"x":[16.85582469463477,-6.881363780090288,-3.0378505480504017]},{"t":314776,"v":[0,0,0],"x":[16.85582469463477,-6.881363780090288,-3.1278505480504015]},{"t":315443,"v":[-0.49993337241422175,-0.008162300321788229,0],"x":[16.689180237163363,-6.884084546864218,-3.1278505480504015]},{"t":325186,"v":[-0.49993337241422175,-0.008162300321788229,0],"x":[11.818246896502632,-6.963611185747893,-3.1278505480504015]},{"t":325853,"v":[0,0,0],"x":[11.651602439031224,-6.966331952521823,-3.1278505480504015]},{"t":326153,"v":[0,0,0.6],"x":[11.651602439031224,-6.966331952521823,-3.0378505480504017]},{"t":328385,"v":[0,0,0.6],"x":[11.651602439031224,-6.966331952521823,-1.6985789473059278]},{"t":328685,"v":[0,0,0],"x":[11.651602439031224,-6.966331952521823,-1.6085789473059282]},{"t":329352,"v":[-0.01888681593558913,-0.4996431608496359,0],"x":[11.645306833719362,-7.132879672805035,-1.6085789473059282]},{"t":333167,"v":[-0.01888681593558913,-0.4996431608496359,0],"x":[11.573243095223296,-9.039297049223038,-1.6085789473059282]},{"t":333834,"v":[-1.7069678995076942e-15,5.828670876367736e-16,0],"x":[11.566947489911431,-9.20584476950625,-1.6085789473059282]}],"shape":"circle"}]}]')},96:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return u}));var a=n(10),r=n.n(a),o=n(20),i=n(97),c=n.n(i),l=n(98),s=n.n(l);function u(){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(r.a.mark((function t(){var n,a,o,i,l,u,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=8;break;case 3:o=t.sent,n=o.readFileSync("".concat(e,"/office.png")),a=o.readFileSync("".concat(e,"/airport_terminal.png")),t.next=24;break;case 8:return t.next=10,fetch(s.a);case 10:return i=t.sent,t.t0=Uint8Array,t.next=14,i.arrayBuffer();case 14:return t.t1=t.sent,n=new t.t0(t.t1),t.next=18,fetch(c.a);case 18:return l=t.sent,t.t2=Uint8Array,t.next=22,l.arrayBuffer();case 22:t.t3=t.sent,a=new t.t2(t.t3);case 24:return u=[{name:"main_door",v1_x:8.2,v1_y:-5.5,v2_x:7.85,v2_y:-6.2,door_type:2,motion_range:-1.571,motion_direction:1},{name:"hardware_door",v1_x:4.9,v1_y:-4,v2_x:4.4,v2_y:-5,door_type:1,motion_range:1.571,motion_direction:-1},{name:"coe_door",v1_x:19.5,v1_y:-10.8,v2_x:19.5,v2_y:-9.9,door_type:1,motion_range:1.571,motion_direction:1},{name:"exit_door",v1_x:12.2,v1_y:-2.7,v2_x:14.1,v2_y:-2.7,door_type:1,motion_range:-1.571,motion_direction:1}],d=[{name:"Lift1",doors:[{name:"lift1_front_door",v1_x:8.8,v1_y:-2.3,v2_x:7.7,v2_y:-4.5,door_type:1,motion_range:0,motion_direction:1}],levels:["L1","L2","L3"],ref_x:7.1,ref_y:-2.8,ref_yaw:.5,width:2.5,depth:2.5,wall_graph:{name:"wallgraph",vertices:[],edges:[],params:[]}},{name:"Lift2",doors:[{name:"lift2_front_door",v1_x:8.95,v1_y:-12.38,v2_x:10.08,v2_y:-12.38,door_type:1,motion_range:0,motion_direction:1}],levels:["L1","L2","L3","L4"],ref_x:9.5,ref_y:-13,ref_yaw:1.571,width:1,depth:1,wall_graph:{name:"wallgraph",vertices:[],edges:[],params:[]}},{name:"mysterious_lift",doors:[],levels:["L1","L2","L3","L4"],ref_x:22,ref_y:-10,ref_yaw:1.571,width:1,depth:1,wall_graph:{name:"wallgraph",vertices:[],edges:[],params:[]}}],t.abrupt("return",{name:"test building",levels:[{name:"L1",elevation:0,images:[{data:n,encoding:"png",name:"office",scale:.008465494960546494,x_offset:0,y_offset:0,yaw:0}],places:[{name:"Place1",x:2,y:-2,yaw:0,position_tolerance:0,yaw_tolerance:0},{name:"Place2",x:8,y:-4,yaw:0,position_tolerance:0,yaw_tolerance:0}],doors:u,nav_graphs:[],wall_graph:{name:"wallgraph",vertices:[],edges:[],params:[]}},{name:"Airport Terminal",elevation:10,doors:[],images:[{data:a,encoding:"png",name:"airport_terminal",scale:.08212187141180038,x_offset:0,y_offset:0,yaw:0}],nav_graphs:[],places:[],wall_graph:{name:"wallgraph",vertices:[],edges:[],params:[]}}],lifts:d});case 27:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}).call(this,"/")},97:function(e,t,n){e.exports=n.p+"static/media/airport_terminal.f7ab7134.png"},98:function(e,t,n){e.exports=n.p+"static/media/office.73533f75.png"}},[[116,1,2]]]);
//# sourceMappingURL=main.6798df7e.chunk.js.map